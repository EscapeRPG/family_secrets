[gd_scene load_steps=20 format=3 uid="uid://c1ol6fbevpt6j"]

[ext_resource type="Script" path="res://Scripts/dining_room.gd" id="1_4irug"]
[ext_resource type="Texture2D" uid="uid://dpw6ovkmuaql5" path="res://Assets/Manoir/DiningRoom/Fond.png" id="1_ikro6"]
[ext_resource type="PackedScene" uid="uid://co07lt5af6ilr" path="res://Scenes/bastian.tscn" id="2_3dxal"]
[ext_resource type="Texture2D" uid="uid://k05v6cbj4p4o" path="res://Assets/Manoir/DiningRoom/Table.png" id="2_kdp8k"]
[ext_resource type="PackedScene" uid="uid://cpuue2w0pfrd7" path="res://Scenes/Nav.tscn" id="2_qndpv"]
[ext_resource type="PackedScene" uid="uid://e25aj6msedyn" path="res://Scenes/ChoiceEvent.tscn" id="3_o3fc0"]
[ext_resource type="PackedScene" uid="uid://ywm804xlns7c" path="res://Scenes/Dialogues.tscn" id="3_onx1o"]
[ext_resource type="Texture2D" uid="uid://cwsri5qusjnxl" path="res://Assets/Manoir/DiningRoom/Rideaux.png" id="5_m1cym"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_3ixed"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_o31ar"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_o7rap"]
size = Vector2(69, 9)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_aro07"]
size = Vector2(51, 74)

[sub_resource type="AtlasTexture" id="AtlasTexture_if1li"]
atlas = ExtResource("5_m1cym")
region = Rect2(0, 0, 100, 332)

[sub_resource type="AtlasTexture" id="AtlasTexture_isov7"]
atlas = ExtResource("5_m1cym")
region = Rect2(100, 0, 100, 332)

[sub_resource type="AtlasTexture" id="AtlasTexture_drafh"]
atlas = ExtResource("5_m1cym")
region = Rect2(200, 0, 100, 332)

[sub_resource type="AtlasTexture" id="AtlasTexture_n1vrw"]
atlas = ExtResource("5_m1cym")
region = Rect2(0, 340, 100, 340)

[sub_resource type="AtlasTexture" id="AtlasTexture_yqslk"]
atlas = ExtResource("5_m1cym")
region = Rect2(100, 340, 100, 340)

[sub_resource type="AtlasTexture" id="AtlasTexture_lg12f"]
atlas = ExtResource("5_m1cym")
region = Rect2(200, 340, 100, 340)

[sub_resource type="SpriteFrames" id="SpriteFrames_nw4d5"]
animations = [{
"frames": [{
"duration": 0.1,
"texture": SubResource("AtlasTexture_if1li")
}, {
"duration": 0.1,
"texture": SubResource("AtlasTexture_isov7")
}, {
"duration": 0.1,
"texture": SubResource("AtlasTexture_drafh")
}],
"loop": false,
"name": &"FenetreBack",
"speed": 1.0
}, {
"frames": [{
"duration": 0.1,
"texture": SubResource("AtlasTexture_n1vrw")
}, {
"duration": 0.1,
"texture": SubResource("AtlasTexture_yqslk")
}, {
"duration": 0.1,
"texture": SubResource("AtlasTexture_lg12f")
}],
"loop": false,
"name": &"FenetreFront",
"speed": 1.0
}]

[node name="DiningRoom" type="Node2D"]
y_sort_enabled = true
texture_filter = 1
script = ExtResource("1_4irug")

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Nav" parent="CanvasLayer" instance=ExtResource("2_qndpv")]

[node name="ChoiceEvent" parent="CanvasLayer" groups=["choice"] instance=ExtResource("3_o3fc0")]
visible = false
question = Array[String](["Voulez-vous fermer la fenÃªtre ?"])

[node name="Fond" type="StaticBody2D" parent="."]

[node name="Fond" type="Sprite2D" parent="Fond"]
texture_filter = 1
position = Vector2(320, 180)
texture = ExtResource("1_ikro6")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Fond"]
polygon = PackedVector2Array(73, 0, 73, 151, 139, 151, 139, 142, 208, 142, 208, 151, 235, 151, 235, 181, 354, 181, 354, 151, 373, 151, 373, 156, 375, 161, 380, 167, 387, 173, 395, 174, 395, 175, 402, 175, 402, 174, 497, 174, 497, 175, 503, 175, 503, 174, 507, 174, 516, 170, 522, 162, 525, 156, 525, 151, 547, 151, 547, 223, 567, 223, 567, 274, 547, 274, 547, 360, 575, 360, 575, 0)

[node name="CollisionShape2D" type="CollisionShape2D" parent="Fond"]
position = Vector2(240, 361)
shape = SubResource("WorldBoundaryShape2D_3ixed")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="Fond"]
position = Vector2(82, 192)
rotation = 1.5708
shape = SubResource("WorldBoundaryShape2D_o31ar")

[node name="Table" type="StaticBody2D" parent="."]
texture_filter = 1
position = Vector2(310, 214)

[node name="Table2" type="Sprite2D" parent="Table"]
position = Vector2(0, 75)
texture = ExtResource("2_kdp8k")
offset = Vector2(0, -60)

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Table"]
position = Vector2(-310, -214)
polygon = PackedVector2Array(199, 222, 199, 244, 206, 251, 206, 287, 236, 287, 236, 305, 267, 305, 267, 287, 298, 287, 298, 297, 329, 297, 329, 287, 354, 287, 354, 297, 385, 297, 385, 287, 414, 287, 414, 251, 421, 244, 421, 222, 384, 222, 384, 213, 353, 213, 353, 222, 325, 222, 325, 213, 294, 213, 294, 222, 260, 222, 260, 213, 229, 213, 229, 222)

[node name="PorteCuisine" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="PorteCuisine"]
position = Vector2(173.5, 145.5)
shape = SubResource("RectangleShape2D_o7rap")

[node name="CanvasLayer" type="CanvasLayer" parent="PorteCuisine"]

[node name="Dialogues" parent="PorteCuisine/CanvasLayer" groups=["dialogue"] instance=ExtResource("3_onx1o")]
visible = false
character_dialogue = Array[String](["Bastian: Prout"])

[node name="Fenetre" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Fenetre"]
position = Vector2(98.5, 252)
shape = SubResource("RectangleShape2D_aro07")

[node name="CanvasLayer" type="CanvasLayer" parent="Fenetre"]

[node name="Dialogues" parent="Fenetre/CanvasLayer" groups=["dialogue"] instance=ExtResource("3_onx1o")]
process_mode = 3
visible = false
character_dialogue = Array[String](["fenetresam", "fenetresam2"])

[node name="FenetreBack" type="StaticBody2D" parent="."]
position = Vector2(93, 192)

[node name="FenetreAnimation" type="AnimatedSprite2D" parent="FenetreBack"]
position = Vector2(0, 3)
sprite_frames = SubResource("SpriteFrames_nw4d5")
animation = &"FenetreBack"
offset = Vector2(0, -35)

[node name="CollisionPolygon2D2" type="CollisionPolygon2D" parent="FenetreBack"]
position = Vector2(0, 9)
polygon = PackedVector2Array(-20, 15, 21, -12, 21, -15, 18, -15, -20, 11)

[node name="FenetreFront" type="StaticBody2D" parent="."]
position = Vector2(93, 302)

[node name="FenetreAnimation2" type="AnimatedSprite2D" parent="FenetreFront"]
position = Vector2(0, -3)
sprite_frames = SubResource("SpriteFrames_nw4d5")
animation = &"FenetreFront"
offset = Vector2(0, -135)

[node name="CollisionPolygon2D3" type="CollisionPolygon2D" parent="FenetreFront"]
position = Vector2(0, -32)
polygon = PackedVector2Array(-20, 25, 21, 53, 21, 48, -19, 20, -20, 21)

[node name="Bastian" parent="." instance=ExtResource("2_3dxal")]
position = Vector2(517, 254)

[connection signal="choix_1" from="CanvasLayer/ChoiceEvent" to="." method="_on_choice_event_choix_1"]
[connection signal="choix_2" from="CanvasLayer/ChoiceEvent" to="." method="_on_choice_event_choix_2"]
[connection signal="body_entered" from="PorteCuisine" to="." method="_on_porte_cuisine_body_entered"]
[connection signal="body_exited" from="PorteCuisine" to="." method="_on_porte_cuisine_body_exited"]
[connection signal="body_entered" from="Fenetre" to="." method="_on_fenetre_body_entered"]
[connection signal="body_exited" from="Fenetre" to="." method="_on_fenetre_body_exited"]
[connection signal="dialogue_finished" from="Fenetre/CanvasLayer/Dialogues" to="." method="_on_dialogues_dialogue_finished"]
